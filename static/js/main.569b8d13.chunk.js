(this["webpackJsonptalky-blocky-demo"]=this["webpackJsonptalky-blocky-demo"]||[]).push([[0],{13:function(e,t,n){e.exports=n(21)},18:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(8),i=n.n(r),l=(n(18),n(4)),c=n(3),s=Math.floor(window.innerWidth/100),u=Math.floor(window.innerHeight/100),d=[];function h(e,t){switch(t.type){case"BUILD_GRID":for(var n=0;n<s;n++){for(var o=[],a=0;a<u;a++)o[a]="255, 255, 255";d[n]=o}return{blockSize:100,width:s,height:u,RGBs:d};case"CHANGE_GRID_BLOCK_COLOR":return e.RGBs[t.position[0]][t.position[1]]=t.rgb,e}}function g(e,t){switch(t.type){case"BUILD_TALKY_BLOCKY":var n=t.grid.blockSize-t.grid.blockSize/4,o=Math.floor(t.grid.blockSize/20+t.grid.blockSize/2-n/2);return{size:n,left:o,top:o,gridPos:[0,0]};case"MOVE_TALKY_BLOCKY":return"left"===t.direction?e.gridPos[0]>0&&(e.left-=100,e.gridPos[0]-=1):"right"===t.direction?e.gridPos[0]<t.grid.width-1&&(e.left+=100,e.gridPos[0]+=1):"down"===t.direction?e.gridPos[1]<t.grid.height-1&&(e.top+=100,e.gridPos[1]+=1):"up"===t.direction&&e.gridPos[1]>0&&(e.top-=100,e.gridPos[1]-=1),e}}var y={up:"up",down:"down",left:"left",right:"right",rights:"right",write:"right"},f={hello:["Hi! How's it going?","Yo!","Hey there."],thanks:["your welcome, easy fix","no sweat, easy fix","piece of cake","It's not like I have a choice"]},k={cornsilk:"255,248,220",almond:"255,235,205",bisque:"255,228,196",navajowhite:"255,222,173",wheat:"245,222,179",burlywood:"222,184,135",cerulean:"42, 82, 190",tan:"210,180,140",rosybrown:"188,143,143",sandybrown:"244,164,96",goldenrod:"218,165,32",chocolate:"210,105,30",saddlebrown:"139,69,19",sienna:"160,82,45",brown:"165,42,42",maroon:"128,0,0",powderblue:"176,224,230",skyblue:"135,206,235",deepskyblue:"0,191,255",dodgerblue:"30,144,255",cornflowerblue:"100,149,237",steelblue:"70,130,180",royalblue:"65,105,225",blue:"0,0,255",mediumblue:"0,0,205",navy:"0,0,128",midnightbllue:"25,25,112",mediumslateblue:"123,104,238",slateblue:"106,90,205",gainsboro:"220,220,220",silver:"192,192,192",gray:"128,128,128",dimgray:"105,105,105",slategray:"112,128,144",black:"0,0,0",lawngreen:"124,252,0",chartreuse:"127,255,0",limegreen:"50,205,50",lime:"0,255,0",forestgreen:"34,139,34",green:"0,128,0",greenyello:"173,255,47",yellowgreen:"154,205,50",springgreen:"0,255,127",mediumspringgreen:"0,250,154",palegreen:"152,251,152",mediumseagree:"60,179,113",seagreen:"46,139,87",olive:"128,128,0",olivedrab:"107,142,35",cyan:"0,255,255",aqua:"0,255,255",aquamarine:"127,255,212",turquoise:"64,224,208",cadetblue:"95,158,160",teal:"0,128,128",cora:"255,127,80",tomato:"255,99,71",orangered:"255,69,0",gold:"255,215,0",orange:"255,165,0",pink:"255,192,203",hotpink:"255,105,180",deeppink:"255,20,147",palevioletred:"219,112,147",mediumvioletre:"199,21,133",salmon:"250,128,114",indianred:"205,92,92",crimson:"220,20,60",firebrick:"178,34,34",red:"255,0,0",lavender:"230,230,250",thistle:"216,191,216",plum:"221,160,221",violet:"238,130,238",orchid:"218,112,214",fuchsia:"255,0,255",magenta:"255,0,255",mediumpurple:"147,112,219",blueviolet:"138,43,226",purple:"128,0,128",indigo:"75,0,130",white:"255,255,255",snow:"255,250,250",honeydew:"240,255,240",mint:"245,255,250",azure:"240,255,255",aliceblue:"240,248,255",ghostwhite:"248,248,255",smoke:"245,245,245",seashell:"255,245,238",beige:"245,245,220",lace:"253,245,230",floralwhite:"255,250,240",ivory:"255,255,240",antiquewhite:"250,235,215",linen:"250,240,230",lavenderblush:"255,240,245",rose:"255,228,225",lemon:"255,250,205",papaya:"255,239,213",moccasin:"255,228,181",peach:"255,218,185",palegoldenrod:"238,232,170",khaki:"240,230,140",yellow:"255,255,0"},p=Object(o.createContext)();function b(e){var t,n,r,i=Object(o.useState)(0),s=Object(c.a)(i,2),u=s[0],d=s[1],b=Object(o.useState)([]),m=Object(c.a)(b,2),w=m[0],v=m[1],O=Object(o.useState)(!1),j=Object(c.a)(O,2),E=j[0],B=j[1],L=Object(o.useState)(!1),I=Object(c.a)(L,2),S=I[0],P=I[1],x=Object(o.useReducer)(h,{}),z=Object(c.a)(x,2),C=z[0],_=z[1],T=Object(o.useReducer)(g,{}),R=Object(c.a)(T,2),D=R[0],G=R[1],Y=[],M=0;function A(e){if(e.results[0].isFinal){var t=e.results[0][0].transcript.toLowerCase().split(" ");console.log(t);var n=t.filter((function(e){return Y.includes(e)}));w.push.apply(w,Object(l.a)(n)),v(w),function(){if(M!==w.length){var e=w.slice(M,w.length);e.length>8&&q("You're lucky I'm a computer, because I would forget all of that otherwise."),e.forEach((function(t,n){console.log(t),setTimeout((function(t){y.hasOwnProperty(t)?(G({type:"MOVE_TALKY_BLOCKY",grid:C,direction:y[t]}),P("wt".concat(t,".png")),e.length<=8&&q(["Walk walk walk",""],.25)):k.hasOwnProperty(t)?(_({type:"CHANGE_GRID_BLOCK_COLOR",position:[D.gridPos[0],D.gridPos[1]],rgb:k[t]}),e.length<=8&&q(["Poof. It's ".concat(t),"Voila.","".concat(t," it is.")],.25)):f.hasOwnProperty(t)&&q(f[t]),d(Date.now())}),350*n,t),setTimeout((function(){P("wtDefault.png")}),350*(e.length+1))})),M=w.length}}()}}function H(){P("wtListening.png")}function K(){P(!1)}function U(){t.start()}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(Math.random()<t){"object"===typeof e&&(e=e[Math.floor(Math.random()*e.length)]);var o=new SpeechSynthesisUtterance(e);o.voice=r,o.pitch=1.5,o.rate=.75,n.speak(o),B(!0),o.addEventListener("end",W)}}function V(e){116===e.keyCode&&(q("Hi. I'm Talky Blocky! Hold down the spacebar to talk to me."),q("If you say right, left, down or up I can move around the grid."),q("Say the name of any color and I can change the grid blocks to that color!"),q("You can also say hello and thanks."),q("Please speak clearly so that I can understand you."),q("Press 'T' to hear the tutorial again."))}function W(){B(!1)}function F(e){if(32===e.keyCode)try{var n=new Audio;n.src="./assets/sounds/listenSound.wav",n.volume=.015,n.play(),t.start(),t.addEventListener("end",U)}catch(o){}}function J(e){if(32===e.keyCode){var n=new Audio;n.src="./assets/sounds/executeSound.wav",n.volume=.015,n.play(),t.removeEventListener("end",U),t.stop(),document.addEventListener("keydown",F,{once:!0})}}return Y.push.apply(Y,Object(l.a)(Object.keys(k))),Y.push.apply(Y,Object(l.a)(Object.keys(y))),Y.push.apply(Y,Object(l.a)(Object.keys(f))),Object(o.useEffect)((function(){if(0===u)_({type:"BUILD_GRID"}),d(1);else if(1===u)G({type:"BUILD_TALKY_BLOCKY",grid:C}),d(2);else if(2===u){document.addEventListener("keydown",F,{once:!0}),document.addEventListener("keyup",J),document.addEventListener("keypress",V),(t=new window.webkitSpeechRecognition).continuous=!1,t.lang="en-US",t.interimResults=!0,t.maxAlternatives=1,t.addEventListener("result",A),t.addEventListener("audiostart",H),t.addEventListener("audioend",K),(n=window.speechSynthesis).addEventListener("voiceschanged",(function(){n.getVoices().forEach((function(e){"Google US English"!==e.name||r||(r=e)}))}));var e="#JSGF V1.0; grammar talkyblockyDictionary;  public <word> = ".concat(Y.join(" | "),";"),o=new window.webkitSpeechGrammarList;o.addFromString(e,1),t.grammars=o,d(3)}else 3===u&&(alert("Hi. I'm Talky Blocky! Hold down the spacebar to talk to me. If you say right, left, down or up I can move around the grid. Say the name of any color and I can change the grid blocks to that color! You can also say hello and thanks. Please speak clearly so that I can understand you. Press 'T' to hear me speak this to you."),d(4))}),[u]),a.a.createElement(p.Provider,{value:{grid:C,talkyBlocky:D,talkyIsTalking:E,talkyBackground:S}},e.children)}var m=p,w=n(1),v=n(2);function O(){var e=Object(w.a)(["\n      background-color: rgb(",");\n    "]);return O=function(){return e},e}function j(){var e=Object(w.a)(["\n      width: ","px;\n      height: ","px;\n      border: ","px solid black;\n    "]);return j=function(){return e},e}function E(){var e=Object(w.a)(["\n  ",";\n  ",";\n"]);return E=function(){return e},e}var B=v.b.div(E(),(function(e){return e.size&&Object(v.a)(j(),e.size-Math.floor(e.size/10),e.size-Math.floor(e.size/10),Math.floor(e.size/20))}),(function(e){return e.color&&Object(v.a)(O(),e.color)}));function L(){var e=Object(w.a)(["\n    display: flex;\n  "]);return L=function(){return e},e}function I(){var e=Object(w.a)(["\n    position: absolute;\n    left: 0px;\n    top 0px;\n    border: 5px solid white;\n    display: inline-block;\n  "]);return I=function(){return e},e}function S(e){for(var t=e.grid,n=v.b.div(I()),o=[],r=v.b.div(L()),i=0,l=0,c=0;c<t.height;c++,l++){for(var s=[],u=0;u<t.width;u++,i++)s[u]=a.a.createElement(B,{key:i,size:t.blockSize,color:t.RGBs[u][c]});o[c]=a.a.createElement(r,{key:l},s)}return a.a.createElement(n,null,o)}function P(){var e=Object(w.a)(["\n      left: ","px;\n      top: ","px;\n      width: ","px;\n      height: ","px;\n      animation-name: ",";\n      animation-duration: 300ms;\n      animation-iteration-count: infinite;\n      background-image: ",";\n    "]);return P=function(){return e},e}function x(){var e=Object(w.a)(["\n  position: absolute;\n  background-repeat: none;\n  transition: left 350ms, top 350ms;\n\n  ","\n"]);return x=function(){return e},e}function z(){var e=Object(w.a)(["\n 0% { filter: brightness(1); }  \n 50% { filter: brightness(1.5); }\n 100% { filter: brightness(1); }\n "]);return z=function(){return e},e}var C=Object(v.c)(z()),_=v.b.div(x(),(function(e){return e.talkyBlocky&&Object(v.a)(P(),e.talkyBlocky.left,e.talkyBlocky.top,e.talkyBlocky.size,e.talkyBlocky.size,e.talkyIsTalking?C:"",e.talkyBackground?"url(./assets/images/walkie-talkie/".concat(e.talkyBackground,")"):"url(./assets/images/walkie-talkie/wtDefault.png)")}));function T(){var e=Object(o.useContext)(m),t=e.talkyBlocky,n=e.grid,r=e.talkyIsTalking,i=e.talkyBackground;return a.a.createElement("div",null,a.a.createElement(S,{grid:n}),a.a.createElement(_,{talkyBlocky:t,talkyIsTalking:r,talkyBackground:i}))}var R=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(b,null,a.a.createElement(T,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.569b8d13.chunk.js.map